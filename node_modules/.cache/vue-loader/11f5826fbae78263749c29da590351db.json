{"remainingRequest":"C:\\Users\\User\\Desktop\\project\\vee\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\project\\vee\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\project\\vee\\src\\components\\Login.vue","mtime":1586341123968},{"path":"C:\\Users\\User\\Desktop\\project\\vee\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\project\\vee\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\project\\vee\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\project\\vee\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXJkYXRhOiB7DQogICAgICAgIC8v5pqr5a2Y6Ly45YWl5biz5a+GDQogICAgICAgIHVzZXJuYW1lOiAiIiwNCiAgICAgICAgcGFzc3dvcmQ6ICIiDQogICAgICB9DQogICAgfTsNCiAgfSwNCiAgYmVmb3JlQ3JlYXRlKCl7DQogICAgZG9jdW1lbnQudGl0bGUgPXRoaXMuJHJvdXRlLm1ldGEudGl0bGUNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGxvZ2luKCkgew0KICAgICAgY29uc3Qgdm0gPSB0aGlzOw0KICAgICAgdm0uJHZhbGlkYXRvci52YWxpZGF0ZUFsbCgpLnRoZW4ocmVzdWx0ID0+IHsNCiAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgIGxldCB0ZW1wVXNlcmRhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VycyIpKTsgLy/mmqvlrZjmlbTljIV1c2Vyc+izh+aWmQ0KICAgICAgICAgIGlmICh0ZW1wVXNlcmRhdGEpIHsNCiAgICAgICAgICAgIHRlbXBVc2VyZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsNCiAgICAgICAgICAgICAgLy/mnInos4fmlpnmmYLmr5TlsI3luLPomZ/jgIHlr4bnorzmmK/lkKbmnInlrozlhajnm7jnrKbnmoRpdGVtDQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICBpdGVtLnVzZXJuYW1lID09IHZtLnVzZXJkYXRhLnVzZXJuYW1lICYmDQogICAgICAgICAgICAgICAgaXRlbS5wYXNzd29yZCA9PSB2bS51c2VyZGF0YS5wYXNzd29yZA0KICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICB2bS4kZW1pdCgidXNlcmxvZ2luIiwgaXRlbS51c2VybmFtZSk7IC8v5om+5Yiw5YmH55m75YWl5oiQ5Yqf77yM5bCHdXNlcm5hbWXlgrPlh7rkuKbkuJTlsI7lkJFmYXZvcumggemdog0KICAgICAgICAgICAgICAgIHZtLiRyb3V0ZXIucHVzaCgiL2Zhdm9yIik7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbGV0IHdyb25nTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLndyb25nTXNnIik7IC8v5om+5LiN5Yiw5YmH5o+S5YWl6Yyv6Kqk6KiK5oGvDQogICAgICAgICAgICAgICAgd3JvbmdNc2cuaW5uZXJIVE1MID0gYOW4s+iZn+aIluWvhueivOmMr+iqpGA7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBsZXQgd3JvbmdNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIud3JvbmdNc2ciKTsgLy9sb2NhbOaykuaciXVzZXJz6LOH5paZ77yM5o+S5YWl5aCx6Yyv6KiK5oGvDQogICAgICAgICAgICB3cm9uZ01zZy5pbm5lckhUTUwgPSBg5oKo5rKS5pyJ6Ki75YaK6YGO5ZOm77yBYDsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container\">\r\n      <div class=\"row mt-5 justify-content-center\">\r\n        <div class=\"col-6 rounded border py-3\">\r\n          <h1 class=\"text-primary font-weight-bold\">記錄我的最愛</h1>\r\n          <h3 class=\"text-secondary\">Login</h3>\r\n          <form action>\r\n            <div class=\"form-group form-row mb-0 mt-3\">\r\n              <label for=\"username\" class=\"col-form-label col-3\">使用者帳號</label>\r\n              <!-- 使用自訂規則username驗證 -->\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control col-9\"\r\n                id=\"username\"\r\n                v-validate=\"'required|username'\"\r\n                name=\"username\"\r\n                data-vv-as=\"使用者名稱\"\r\n                placeholder=\"請輸入使用者名稱\"\r\n                v-model=\"userdata.username\"\r\n                :class=\"{'is-invalid':errors.has('username'),'is-valid':!errors.has('username')&&userdata.username!==''}\"\r\n              />\r\n            </div>\r\n            <div class=\"col-form-label col py-0\">\r\n              <span\r\n                v-if=\"errors.has('username')\"\r\n                class=\"text-danger text-center small\"\r\n              >{{errors.first('username')}}</span>\r\n            </div>\r\n            <div class=\"form-group form-row mb-0 mt-3\">\r\n              <label for=\"password\" class=\"col-form-label col-3\">使用者密碼</label>\r\n              <!-- 使用自訂規則password驗證 -->\r\n              <input\r\n                type=\"password\"\r\n                class=\"form-control col-9\"\r\n                id=\"password\"\r\n                v-validate=\"'required|password'\"\r\n                name=\"password\"\r\n                data-vv-as=\"使用者密碼\"\r\n                placeholder=\"請輸入使用者密碼\"\r\n                v-model=\"userdata.password\"\r\n                :class=\"{'is-invalid':errors.has('password'),'is-valid':!errors.has('password')&&userdata.password!==''}\"\r\n              />\r\n              <div class=\"col-form-label col py-0\">\r\n                <span\r\n                  v-if=\"errors.has('password')\"\r\n                  class=\"text-danger text-center small\"\r\n                >{{errors.first('password')}}</span>\r\n              </div>\r\n            </div>\r\n          </form>\r\n          <!-- 直接使用router-link導向註冊頁面 -->\r\n          <router-link to=\"/signup\" class=\"btn btn-outline-info mt-3 mx-3\">註冊帳號</router-link>\r\n          <div class=\"btn btn-primary mt-3 mx-3\" @click=\"login\">登入系統</div>\r\n          <div class=\"row py-5\">\r\n            <div class=\"col\">\r\n              <div class=\"wrongMsg text-center small text-danger\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      userdata: {\r\n        //暫存輸入帳密\r\n        username: \"\",\r\n        password: \"\"\r\n      }\r\n    };\r\n  },\r\n  beforeCreate(){\r\n    document.title =this.$route.meta.title\r\n  },\r\n  methods: {\r\n    login() {\r\n      const vm = this;\r\n      vm.$validator.validateAll().then(result => {\r\n        if (result) {\r\n          let tempUserdata = JSON.parse(localStorage.getItem(\"users\")); //暫存整包users資料\r\n          if (tempUserdata) {\r\n            tempUserdata.forEach(function(item) {\r\n              //有資料時比對帳號、密碼是否有完全相符的item\r\n              if (\r\n                item.username == vm.userdata.username &&\r\n                item.password == vm.userdata.password\r\n              ) {\r\n                vm.$emit(\"userlogin\", item.username); //找到則登入成功，將username傳出並且導向favor頁面\r\n                vm.$router.push(\"/favor\");\r\n              } else {\r\n                let wrongMsg = document.querySelector(\".wrongMsg\"); //找不到則插入錯誤訊息\r\n                wrongMsg.innerHTML = `帳號或密碼錯誤`;\r\n              }\r\n            });\r\n          } else {\r\n            let wrongMsg = document.querySelector(\".wrongMsg\"); //local沒有users資料，插入報錯訊息\r\n            wrongMsg.innerHTML = `您沒有註冊過哦！`;\r\n          }\r\n        } else {\r\n          return;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>"]}]}